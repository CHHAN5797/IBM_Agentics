{
  "captured_at_utc": "2025-10-08T18:12:52.683567+00:00",
  "snapshot_url": "https://snapshot.org/#/balancer.eth/proposal/0x4526a0204044f02a5902f0d3243d9874a7204586ede269f99df1b125f80875ce",
  "focus": null,
  "votes_count": 4,
  "timeline_metrics_current": {
    "unique_voters": 4,
    "total_votes": 4,
    "first_vote_at": "2025-06-15T18:04:52Z",
    "last_vote_at": "2025-06-17T08:00:01Z",
    "series_step_hours": 6.0,
    "summary": "timeline-only analysis (no final tally)",
    "recommended_index": 0,
    "lead_ratio_by_quartile": [
      [
        0.0,
        0.0,
        0.0
      ],
      [
        0.0,
        0.0,
        0.0
      ],
      [
        1.0,
        0.0,
        0.0
      ],
      [
        1.0,
        0.0,
        0.0
      ]
    ],
    "lead_ratio_total": [
      1.0,
      0.0,
      0.0
    ],
    "stability": [
      1.0,
      0.0,
      0.0
    ],
    "early_ratio": [
      0.0,
      0.0,
      0.0
    ],
    "vp_by_quartile": [
      [
        0.0,
        0.0,
        0.0
      ],
      [
        0.0,
        0.0,
        0.0
      ],
      [
        506660.4374037697,
        0.0,
        303245.6413935146
      ],
      [
        2338432.8691252563,
        0.0,
        0.0
      ]
    ],
    "spike_index": 0.821918,
    "spike_follow_support_ratio": 0.0,
    "stairwise_ratio": 0.178082,
    "half_slope_diff": 35.45175
  },
  "adjacent_analytics": [
    {
      "id": "0x44aef67cc15fd6ba58b10c1b61bd027584d9a24582130413b5c0c820e43bcc55",
      "title": "[BIP-840] Fund OpCo Marketing Team (Q3–Q4 2025)",
      "author": "0x7019Be4E4eB74cA5F61224FeAf687d2b43998516",
      "end_utc": "2025-06-10T18:00:00Z",
      "timeline_metrics": {
        "unique_voters": 5,
        "total_votes": 5,
        "first_vote_at": "2025-06-09T09:35:10Z",
        "last_vote_at": "2025-06-10T10:25:02Z",
        "series_step_hours": 6.0,
        "summary": "timeline-only analysis (no final tally)",
        "recommended_index": 0,
        "lead_ratio_by_quartile": [
          [
            0.0,
            0.0,
            0.0
          ],
          [
            0.0,
            0.0,
            0.0
          ],
          [
            1.0,
            0.0,
            0.0
          ],
          [
            1.0,
            0.0,
            0.0
          ]
        ],
        "lead_ratio_total": [
          1.0,
          0.0,
          0.0
        ],
        "stability": [
          1.0,
          0.0,
          0.0
        ],
        "early_ratio": [
          0.0,
          0.0,
          0.0
        ],
        "vp_by_quartile": [
          [
            0.0,
            0.0,
            0.0
          ],
          [
            0.0,
            0.0,
            0.0
          ],
          [
            311231.88045943994,
            0.0,
            0.0
          ],
          [
            2700077.281679952,
            0.0,
            0.0
          ]
        ],
        "spike_index": 0.790936,
        "spike_follow_support_ratio": 1.0,
        "stairwise_ratio": 0.209064,
        "half_slope_diff": 84.071871
      },
      "price_impact_pct": 1.9933,
      "tvl_impact_pct": 7.2152,
      "similarity": 0.0769,
      "actual_vote_result": {
        "winner_index": 0,
        "winner_label": "Yes, let's do it",
        "margin_abs": 998728.7225691577,
        "scores_total": 3011309.162139392,
        "margin_pct": 0.3316593112145312
      }
    },
    {
      "id": "0x83b3e08abc0422b4cf17611d6af30d567deb605083b935cc061c578e5afbb842",
      "title": "[BIP-839] Enable Gauge for wrsETH/waETH [Optimism]",
      "author": "0x7019Be4E4eB74cA5F61224FeAf687d2b43998516",
      "end_utc": "2025-06-10T18:00:00Z",
      "timeline_metrics": {
        "unique_voters": 5,
        "total_votes": 5,
        "first_vote_at": "2025-06-08T18:05:37Z",
        "last_vote_at": "2025-06-10T08:00:01Z",
        "series_step_hours": 6.0,
        "summary": "timeline-only analysis (no final tally)",
        "recommended_index": 0,
        "lead_ratio_by_quartile": [
          [
            0.0,
            0.0,
            0.0
          ],
          [
            0.0,
            0.0,
            0.0
          ],
          [
            1.0,
            0.0,
            0.0
          ],
          [
            1.0,
            0.0,
            0.0
          ]
        ],
        "lead_ratio_total": [
          1.0,
          0.0,
          0.0
        ],
        "stability": [
          1.0,
          0.0,
          0.0
        ],
        "early_ratio": [
          0.0,
          0.0,
          0.0
        ],
        "vp_by_quartile": [
          [
            0.0,
            0.0,
            0.0
          ],
          [
            0.0,
            0.0,
            0.0
          ],
          [
            627773.6464710196,
            0.0,
            0.0
          ],
          [
            2384254.575691227,
            0.0,
            0.0
          ]
        ],
        "spike_index": 0.790985,
        "spike_follow_support_ratio": 0.0,
        "stairwise_ratio": 0.209015,
        "half_slope_diff": 60.200963
      },
      "price_impact_pct": 1.9933,
      "tvl_impact_pct": 7.2152,
      "similarity": 0.0575,
      "actual_vote_result": {
        "winner_index": 0,
        "winner_label": "Yes, let's do it",
        "margin_abs": 3012028.2221622462,
        "scores_total": 3012028.2221622462,
        "margin_pct": 1.0
      }
    },
    {
      "id": "0x09d30b0ad9969d5e296a3833fe92d22b1e7d8f6745fa7d9347ffc197671514f4",
      "title": "[BIP-837] Enable wUSDN/BOLD Stable pool Gauge on Balancer v3 Ethereum",
      "author": "0x7019Be4E4eB74cA5F61224FeAf687d2b43998516",
      "end_utc": "2025-06-10T18:00:00Z",
      "timeline_metrics": {
        "unique_voters": 4,
        "total_votes": 4,
        "first_vote_at": "2025-06-09T09:34:05Z",
        "last_vote_at": "2025-06-10T08:00:01Z",
        "series_step_hours": 6.0,
        "summary": "timeline-only analysis (no final tally)",
        "recommended_index": 0,
        "lead_ratio_by_quartile": [
          [
            0.0,
            0.0,
            0.0
          ],
          [
            0.0,
            0.0,
            0.0
          ],
          [
            1.0,
            0.0,
            0.0
          ],
          [
            1.0,
            0.0,
            0.0
          ]
        ],
        "lead_ratio_total": [
          1.0,
          0.0,
          0.0
        ],
        "stability": [
          1.0,
          0.0,
          0.0
        ],
        "early_ratio": [
          0.0,
          0.0,
          0.0
        ],
        "vp_by_quartile": [
          [
            0.0,
            0.0,
            0.0
          ],
          [
            0.0,
            0.0,
            0.0
          ],
          [
            311235.3653989644,
            0.0,
            0.0
          ],
          [
            2384254.590102218,
            0.0,
            0.0
          ]
        ],
        "spike_index": 0.883872,
        "spike_follow_support_ratio": 0.0,
        "stairwise_ratio": 0.116128,
        "half_slope_diff": 131.225798
      },
      "price_impact_pct": 1.9933,
      "tvl_impact_pct": 7.2152,
      "similarity": 0.0866,
      "actual_vote_result": {
        "winner_index": 0,
        "winner_label": "Yes, let's do it",
        "margin_abs": 2695489.9555011825,
        "scores_total": 2695489.9555011825,
        "margin_pct": 1.0
      }
    }
  ],
  "similar_proposals_data": [
    {
      "proposal_id": "0x34c9af709dcd8289b13e36efee96613705a6d608891714a90b4b413b08330e7a",
      "cleaned": {
        "proposal_id": "0x34c9af709dcd8289b13e36efee96613705a6d608891714a90b4b413b08330e7a",
        "title": "[BIP-696] Transfer GNO to karpatkey’s Treasury Safe & Authorise Staking on Stakewise v3",
        "author": "0x7c2eA10D3e5922ba3bBBafa39Dc0677353D2AF17",
        "end_utc": "2024-09-23T18:00:00Z",
        "similarity_score": 0.1418,
        "winning_option": "Yes, let's do it",
        "winning_option_index": 0,
        "margin_abs": 1681561.5390812187,
        "margin_pct": 0.5789435851711605,
        "scores_total": 2904534.3659591237,
        "change_stance": "To change"
      },
      "timeline_metrics": {
        "unique_voters": 5,
        "total_votes": 5,
        "first_vote_at": "2024-09-20T04:02:30Z",
        "last_vote_at": "2024-09-23T06:20:39Z",
        "series_step_hours": 6.0,
        "summary": "timeline-only analysis (no final tally)",
        "recommended_index": 0,
        "lead_ratio_by_quartile": [
          [
            1.0,
            0.0,
            0.0
          ],
          [
            1.0,
            0.0,
            0.0
          ],
          [
            0.0,
            0.0,
            0.0
          ],
          [
            1.0,
            0.0,
            0.0
          ]
        ],
        "lead_ratio_total": [
          1.0,
          0.0,
          0.0
        ],
        "stability": [
          1.0,
          0.0,
          0.0
        ],
        "early_ratio": [
          1.0,
          0.0,
          0.0
        ],
        "vp_by_quartile": [
          [
            0.006675445247928839,
            0.0,
            0.0
          ],
          [
            237865.7617742849,
            0.0,
            0.0
          ],
          [
            0.0,
            0.0,
            0.0
          ],
          [
            2666668.597509393,
            0.0,
            0.0
          ]
        ],
        "spike_index": 0.834767,
        "spike_follow_support_ratio": 1.0,
        "stairwise_ratio": 0.165233,
        "half_slope_diff": 20.445666
      },
      "raw": {
        "id": "0x34c9af709dcd8289b13e36efee96613705a6d608891714a90b4b413b08330e7a",
        "title": "[BIP-696] Transfer GNO to karpatkey’s Treasury Safe & Authorise Staking on Stakewise v3",
        "author": "0x7c2eA10D3e5922ba3bBBafa39Dc0677353D2AF17",
        "body": "# PR with Payload: \nhttps://github.com/BalancerMaxis/multisig-ops/pull/1291\n\n# Abstract\n\nThis proposal seeks the BalancerDAO to take the following actions:\n\n\n\n1. Have the [Balancer’s DAO main Safe](https://app.safe.global/home?safe=eth:0x10A19e7eE7d7F8a52822f6817de8ea18204F2e4f) claim the locked GNO in the [GNO locking contract](https://etherscan.io/address/0x4f8ad938eba0cd19155a835f617317a6e788c868).\n2. Bridge the GNO from mainnet to Gnosis Chain (GC) using the Gnosis Bridge.\n3. Set as destination address karpatkey’s managed Safe, whose [Gnosis Chain version](https://app.safe.global/settings/setup?safe=gno:0x0EFcCBb9E2C09Ea29551879bd9Da32362b32fc89) has just been launched.\n4. Grant permission to karpatkey to stake GNO on [Stakewise v3](https://x.com/stakewise_io/status/1816458408041574446).\n\n\n# Motivation\n\nFollowing a successful[ Snapshot vote](https://snapshot.org/#/balancer.eth/proposal/0x8d4969e56fa8eb13abc7a3404b3d42fe6b4afa1c7f29111bd012314f093a2fd2) in January 2022, the BalancerDAO and the GnosisDAO conducted a token swap, resulting in 9,051 GNO being added to the DAO’s treasury. These tokens, claimed by the DAO in 2023, have been idle for a year since the locking period expired on February 15th, 2023. Now that Stakewise v3 has launched on Gnosis Chain and offers GNO staking possibilities, it’s a good opportunity to put those idle assets to work.\n\nWe propose making them available to karpatkey for yield-generating strategies, specifically staking on the [Genesis Vault](https://prerelease.stakewise.io/vault/gnosis/0x4b4406ed8659d03423490d8b62a1639206da0a7a), the [Serenita Vault](https://app.stakewise.io/vault/gnosis/0x00025c729a3364faef02c7d1f577068d87e90ba6) and the [Nedo Vault](https://app.stakewise.io/vault/gnosis/0x2cd404d9d75436e7d6ddbccc2fb9cf7c06941bf1) on Stakewise V3. At the time of this writing, these vaults offer an APR ranging between 4% and 10%.\n\n\n# Justification\n\nAs mentioned[ ](https://forum.balancer.fi/t/treasury-update-unlocked-gno-allocation/4505)in [this](https://forum.balancer.fi/t/treasury-update-unlocked-gno-allocation/4505) treasury update, staking on StakeWise is the optimal choice for GNO allocation. Its non-custodial staking on Gnosis Chain offers an attractive APR without the complexities and risks of leveraged positions or providing liquidity to DEX pools.\n\nStakeWise v3 is an enhanced version of the StakeWise liquid staking protocol. The[ new version](https://stakewise.medium.com/stakewise-v3-is-coming-to-gnosis-chain-fc4a05b9b78e) features a modular architecture with an expanded node operator set, native unstaking, automatic rewards compounding. Additionally, the infrastructure upgrade for their [overcollateralized liquid staking tokens](https://docs.stakewise.io/protocol-overview-in-depth/oseth#overcollateralization) (os tokens) enables greater composability with other DeFi protocols and strategies. To enhance capital efficiency and sustain yield generation, a future strategy incorporating the use of osGNO could be proposed.\n\n\n# Specification\n\n\n## Deployed contracts on GC\n\nIt’s important to note that a [new Avatar Safe](https://app.safe.global/home?safe=gno:0x0efccbb9e2c09ea29551879bd9da32362b32fc89) (also known as karpatkey’s managed treasury Safe, solely owned by the Balancer DAO) and a new [Manager Safe](https://app.safe.global/home?safe=gno:0x60716991aCDA9E990bFB3b1224f1f0fB81538267) (owned by karpatkey to execute approved actions on behalf of the Balancer DAO) have been deployed, along with the necessary [Zodiac Roles Modifier contract](https://gnosisscan.io/address/0x13c61a25DB73e7a94a244bD2205aDba8b4a60F4a) , which includes the [allowlisted permissions](https://roles.gnosisguild.org/permissions/gno/hLN8c3H4EvuSXMY9ko9Q31NQ3fwKCYBgnm2IDls7w) requested in this proposal. It is worth noting that the new Avatar and Manager Safes on Gnosis Chain have the same address as the existing ones on Mainnet.\n\nThe current setup on Gnosis Chain mirrors the [Balancer’s DAO main Safe](https://app.safe.global/home?safe=eth:0x10A19e7eE7d7F8a52822f6817de8ea18204F2e4f) and the existing Avatar Safe on mainnet, with the addition of one [EOA](https://gnosisscan.io/address/0x7f87c1C42BeF332245F8B3cCAdD8224541CDaEcE) belonging to karpatkey, used to configure the entire setup. After the new configuration and permissions granted to karpatkey are audited, the next step will be to remove karpatkey’s EOA from the ownership structure, resulting in the same 6/11 scheme used for the other Safes mentioned.\n\nAs part of our internal due diligence and controls, we have deployed a [Test Avatar Safe](https://app.safe.global/balances?safe=gno:0xC01318baB7ee1f5ba734172bF7718b5DC6Ec90E1) and thoroughly tested the staking & unstaking mechanisms of osGNO on Stakewise V3.\n\n\n## Technical Specification\n\nUpon the passing of this proposal, the following steps need to be executed.\n\nTo be executed by the new [Avatar Safe on Gnosis Chain](https://app.safe.global/home?safe=gno:0x0efccbb9e2c09ea29551879bd9da32362b32fc89):\n\n\n\n1. Remove [karpatkey’s EOA](https://gnosisscan.io/address/0x7f87c1C42BeF332245F8B3cCAdD8224541CDaEcE) as an owner of the Avatar Safe in GC.\n\n<span style=\"text-decoration:underline;\">The following [payload #1](https://gist.github.com/JeronimoHoulin/a85357c8d8a115f12a70bf737543154b)</span> needs to be executed through the Avatar Safe, and this is the [Tenderly simulation](https://dashboard.tenderly.co/public/safe/safe-apps/simulator/100cd18f-1e90-4826-9f49-93c92e75ff2c).\n\nTo be executed by the [DAO main multisig on Mainnet](https://app.safe.global/home?safe=eth:0x10A19e7eE7d7F8a52822f6817de8ea18204F2e4f):\n\n1. Claim locked GNO. \n2. Bridge GNO (total balance) from Mainnet to Gnosis Chain.\n    1. Set as destination address the [new Avatar Safe](https://app.safe.global/home?safe=gno:0x0efccbb9e2c09ea29551879bd9da32362b32fc89).\n\nThe following [payload #2](https://gist.github.com/JeronimoHoulin/fb0ac970acefcdaf69ee84451e8c7e38) needs to be executed, and this is the [Tenderly simulation](https://dashboard.tenderly.co/public/safe/safe-apps/simulator/c04aa72e-9f22-4518-9601-7cd94dd11842). \nPR opened at: https://github.com/BalancerMaxis/multisig-ops/pull/1291\n\nNote: you can check that the `receiver` parameter in the bridge message is set to [0x0efccbb9e2c09ea29551879bd9da32362b32fc89](https://app.safe.global/home?safe=gno:0x0efccbb9e2c09ea29551879bd9da32362b32fc89) = the Avatar Safe on GC.\n\nSubsequently, karpatkey will stake 9,051 GNO on Stakewise v3 and conduct monitoring / rebalancing / re-allocation to different vaults / exit strategies according to market conditions & liquidity.\n\n\n# Zodiac Roles Modifier Permissions Policy\n\n\n## New permissions\n\nNew permissions to be able to deposit, withdraw, mint and burn GNO on the mentioned vaults can be found in the Roles App Permissions Visualization tool.\n\n[https://roles.gnosisguild.org/permissions/gno/hLN8c3H4EvuSXMY9ko9Q31NQ3fwKCYBgnm2IDls7w](https://roles.gnosisguild.org/permissions/gno/hLN8c3H4EvuSXMY9ko9Q31NQ3fwKCYBgnm2IDls7w) \n\n\n## Update on the existing preset\n\n[https://roles.gnosisguild.org/gno:0x13c61a25DB73e7a94a244bD2205aDba8b4a60F4a/roles/MANAGER/diff/hLN8c3H4EvuSXMY9ko9Q31NQ3fwKCYBgnm2IDls7w](https://roles.gnosisguild.org/gno:0x13c61a25DB73e7a94a244bD2205aDba8b4a60F4a/roles/MANAGER/diff/hLN8c3H4EvuSXMY9ko9Q31NQ3fwKCYBgnm2IDls7w)",
        "end_utc": "2024-09-23T18:00:00Z",
        "similarity_score": 0.1418,
        "vote_result": {
          "choices": [
            "Yes, let's do it",
            "No, this is not the way",
            "Abstain"
          ],
          "scores": [
            2293047.952520171,
            0,
            611486.4134389524
          ],
          "scores_total": 2904534.3659591237,
          "state": "closed"
        },
        "tvl_impact": {
          "protocol_slug": "balancer-v1+balancer-v2+balancer-v3",
          "protocol_slugs": [
            "balancer-v1",
            "balancer-v2",
            "balancer-v3"
          ],
          "status": "success",
          "aggregation": "sum",
          "event_time_utc": "2024-09-23T18:00:00",
          "pre_tvl_avg": 728471395.5,
          "post_tvl_avg": 760272261.0,
          "abnormal_change": 4.3654,
          "pre_days": 3,
          "post_days": 3,
          "abnormal_change_raw": 0.043654,
          "abnormal_change_pct": 4.3654
        },
        "price_impact": {
          "token_id": "5728",
          "ticker": "BAL",
          "status": "success",
          "event_time_utc": "2024-09-23T18:00:00",
          "pre_price_avg": 2.00455717,
          "post_price_avg": 2.070966935,
          "abnormal_change": 3.3129,
          "pre_days": 3,
          "post_days": 3,
          "abnormal_change_raw": 0.033129,
          "abnormal_change_pct": 3.3129
        }
      }
    },
    {
      "proposal_id": "0xc2a441f36eddac49a1ca2ed865a017cdf3f2068090db4d1b390a96667b5620ca",
      "cleaned": {
        "proposal_id": "0xc2a441f36eddac49a1ca2ed865a017cdf3f2068090db4d1b390a96667b5620ca",
        "title": "[BIP-667] Roles V2 Migration & New Treasury Permissions",
        "author": "0x7019Be4E4eB74cA5F61224FeAf687d2b43998516",
        "end_utc": "2024-08-12T18:00:00Z",
        "similarity_score": 0.1407,
        "winning_option": "Yes, let's do it",
        "winning_option_index": 0,
        "margin_abs": 935097.6336875183,
        "margin_pct": 0.3674415503069909,
        "scores_total": 2544888.113242122,
        "change_stance": "To change"
      },
      "timeline_metrics": {
        "unique_voters": 9,
        "total_votes": 9,
        "first_vote_at": "2024-08-09T09:14:34Z",
        "last_vote_at": "2024-08-12T08:38:49Z",
        "series_step_hours": 6.0,
        "summary": "timeline-only analysis (no final tally)",
        "recommended_index": 0,
        "lead_ratio_by_quartile": [
          [
            1.0,
            0.0,
            0.0
          ],
          [
            1.0,
            0.0,
            0.0
          ],
          [
            1.0,
            0.0,
            0.0
          ],
          [
            1.0,
            0.0,
            0.0
          ]
        ],
        "lead_ratio_total": [
          1.0,
          0.0,
          0.0
        ],
        "stability": [
          1.0,
          0.0,
          0.0
        ],
        "early_ratio": [
          1.0,
          0.0,
          0.0
        ],
        "vp_by_quartile": [
          [
            0.8268365969831775,
            0.0,
            0.0
          ],
          [
            1245.704517081313,
            0.0,
            0.0
          ],
          [
            613.5690503342887,
            0.0,
            223662.46704386635
          ],
          [
            2319365.5457942435,
            0.0,
            0.0
          ]
        ],
        "spike_index": 0.999198,
        "spike_follow_support_ratio": 0.0,
        "stairwise_ratio": 0.000802,
        "half_slope_diff": 15.368918
      },
      "raw": {
        "id": "0xc2a441f36eddac49a1ca2ed865a017cdf3f2068090db4d1b390a96667b5620ca",
        "title": "[BIP-667] Roles V2 Migration & New Treasury Permissions",
        "author": "0x7019Be4E4eB74cA5F61224FeAf687d2b43998516",
        "body": "### PR with Payload\nhttps://github.com/BalancerMaxis/multisig-ops/pull/1154\n\n# Abstract\n\nThis proposal aims to roll out an updated version of the Zodiac Roles Modifier module. The new version improves usability and transparency of treasury management operations. Upon approval, the Roles Modifier v2 module will be activated.\n\nFurthermore, this proposal requests authorization from the DAO to revise the permissions policy. A notable change includes enabling swapping actions on CoW Swap while the other permissions primarily focus on eliminating obsolete actions and protocols, and refining parameters within the existing permissions.\n\n\n# Roles v2 Migration\n\n\n## Motivation\n\nThe Zodiac Roles Modifier facilitates karpatkey’s proxy management of the treasury by ensuring that only pre-approved transactions, defined by the permissions policy voted on by the DAO, can be executed. In collaboration with karpatkey, the Gnosis Guild team has significantly upgraded the Zodiac Roles Modifier module and the Zodiac Roles app. These enhancements have resulted in a more powerful and robust on-chain permissions infrastructure with the following improvements:\n\n\n\n* **Introduction of Allowances**: Implementation of spending limits within permissions.\n* **Enhanced Call Data Scoping Toolset**: This toolset considerably broadens the range of functions that can have permissions set, increasing flexibility.\n* **Advanced Logical Conditions**: Allows for the creation of complex permissions structures to accommodate sophisticated operational needs.\n* **Compatibility with [DeFi Kit](https://kit.karpatkey.com/)**: This feature integrates with karpatkey’s permissions policy building module, facilitating the straightforward crafting of protocol actions.\n* **Improved Visualisation and User Interface**: the new [Zodiac Roles app UI](https://roles.gnosisguild.org/) not only displays permissions clearly but also provides a user-friendly interface to compare changes in each policy update, enhancing transparency and simplifying audits.\n\nFor more detailed information, please refer to the following resources:\n\n\n\n* **Documentation**: [The Zodiac Roles Modifier](https://docs.roles.gnosisguild.org/)\n* **Articles**: [Evolving Smart Accounts with Onchain Permissions](https://gnosisguild.mirror.xyz/oQcy_c62huwNkFS0cMIxXwQzrfG0ESQax8EBc_tWwwk), [Permissions as code](https://engineering.gnosisguild.org/posts/permissions-as-code)\n\n\n## Contract Audits\n\nThe Zodiac Roles Modifier v2 contract has been rigorously audited by G0 Group, the internal auditing team of Gnosis DAO, and by [Omniscia](https://omniscia.io/). The detailed audit reports are available for review [here](https://github.com/gnosisguild/zodiac-modifier-roles/tree/main/packages/evm/docs).\n\n\n# Changes to the Permissions Policy\n\nThis proposal outlines the following modifications to the permissions policy:\n\n\n\n* **Token Arrays for Swapping**:\n    * Considering the tokens involved in the existing permissions, we have updated the token arrays to ensure they can be seamlessly swapped across the various whitelisted protocols and aggregators.\n    * **Token IN Allowlist**: [WBTC, DAI, USDT, stkAAVE, AAVE, COMP,  rETH, SWISE, wstETH, WETH, USDC, stETH].\n    * **Token OUT Allowlist**: [WBTC, DAI, USDT, rETH, wstETH, WETH, USDC, stETH].\n    * The above arrays are to be utilized for swapping on CoW Swap, with equivalent lists replicated for Uniswap v3 and Balancer.\n* **Introduction of CoW Swap**([diff](https://roles.gnosisguild.org/eth:0xBd1099dFD3c11b65FB4BB19A350da2f5B61Efb0d/roles/BALANCER-MANAGER-V1/diff/iTJ1ur6sArvnFgJ87Auppx8FrtbLMt68HnRmpVc?annotations=false#right-0x23da9ade38e4477b23770ded512fd37b12381fab)):\n    * Addition of a **CoW Swap Order signer** to enable gas-minimized and MEV-protected swaps. This includes an extensive set of aggregated exchange routes, improving the efficiency and effectiveness of required swaps.\n    * Tokens will be swapped on CoW Swap according to the token IN/OUT allowlists mentioned above.\n* **Deprecations and Removals**:\n    * **Uniswap v2**([diff](https://roles.gnosisguild.org/eth:0xBd1099dFD3c11b65FB4BB19A350da2f5B61Efb0d/roles/BALANCER-MANAGER-V1/diff/iTJ1ur6sArvnFgJ87Auppx8FrtbLMt68HnRmpVc?annotations=false#left-0x68b3465833fb72a70ecdf485e0e4c7bd8665fc45-0x472b43f3)): Removed due to insufficient liquidity in v2 pools.\n    * **Sushiswap**([diff](https://roles.gnosisguild.org/eth:0xBd1099dFD3c11b65FB4BB19A350da2f5B61Efb0d/roles/BALANCER-MANAGER-V1/diff/iTJ1ur6sArvnFgJ87Auppx8FrtbLMt68HnRmpVc?annotations=false#left-0x5550d13389bb70f45fcef58f19f6b6e87f6e747d)): Removed due to insufficient liquidity in Sushiswap pools.\n    * **Stakewise v2**: Deprecated functions related to deposit ([diff](https://roles.gnosisguild.org/eth:0xBd1099dFD3c11b65FB4BB19A350da2f5B61Efb0d/roles/BALANCER-MANAGER-V1/diff/iTJ1ur6sArvnFgJ87Auppx8FrtbLMt68HnRmpVc?annotations=false#left-0xc874b064f465bdd6411d45734b56fac750cda29a)) and claim ([diff](https://roles.gnosisguild.org/eth:0xBd1099dFD3c11b65FB4BB19A350da2f5B61Efb0d/roles/BALANCER-MANAGER-V1/diff/iTJ1ur6sArvnFgJ87Auppx8FrtbLMt68HnRmpVc?annotations=false#left-0xa3f21010e8b9a3930996c8849df38f9ca3647c20)) functions in light of the recent launch of Stakewise v3.\n    * **Compound v2** ([diff](https://roles.gnosisguild.org/eth:0xBd1099dFD3c11b65FB4BB19A350da2f5B61Efb0d/roles/BALANCER-MANAGER-V1/diff/iTJ1ur6sArvnFgJ87Auppx8FrtbLMt68HnRmpVc?annotations=false#left-0x3d9819210a31b4961b30ef54be2aed79b9c9cd3b-0x1c3db2e0)): Discontinued all actions targeting v2 contracts and v2 cTokens (cUSDC, cDAI and cAAVE) due to the ongoing transition of the protocol to its v3.\n    * **Revocation of Existing/Obsolete Allowances:** All existing and outdated allowances previously set by the treasury are revoked (set to zero). The ability to call the corresponding approve functions is included in the newly proposed policy. Accordingly, the payload contains a bundle of transactions to revoke these allowances.\n* **Updates**:\n    * **AAVE Delegation:** Delegation function update for AAVE ([diff](https://roles.gnosisguild.org/eth:0xBd1099dFD3c11b65FB4BB19A350da2f5B61Efb0d/roles/BALANCER-MANAGER-V1/diff/iTJ1ur6sArvnFgJ87Auppx8FrtbLMt68HnRmpVc?annotations=false#right-0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9-0xdc937e1c)) and stkAAVE ([diff](https://roles.gnosisguild.org/eth:0xBd1099dFD3c11b65FB4BB19A350da2f5B61Efb0d/roles/BALANCER-MANAGER-V1/diff/iTJ1ur6sArvnFgJ87Auppx8FrtbLMt68HnRmpVc?annotations=false#right-0x4da27a545c0c5b758a6ba100e3a049001de870f5-0xdc937e1c)) tokens. Very similar to the delegate function, with the added option of delegation type.\n    * **Uniswap v3** ([diff](https://roles.gnosisguild.org/eth:0xBd1099dFD3c11b65FB4BB19A350da2f5B61Efb0d/roles/BALANCER-MANAGER-V1/diff/iTJ1ur6sArvnFgJ87Auppx8FrtbLMt68HnRmpVc?annotations=false#right-0x68b3465833fb72a70ecdf485e0e4c7bd8665fc45-0x04e45aaf)) **and Balancer** ([diff](https://roles.gnosisguild.org/eth:0xBd1099dFD3c11b65FB4BB19A350da2f5B61Efb0d/roles/BALANCER-MANAGER-V1/diff/iTJ1ur6sArvnFgJ87Auppx8FrtbLMt68HnRmpVc?annotations=false#right-0xba12222222228d8ba445958a75a0704d566bf2c8)): Adjusted to allow the mentioned token IN/OUT allowlists.\n    * **Lido Withdrawals** ([diff](https://roles.gnosisguild.org/eth:0xBd1099dFD3c11b65FB4BB19A350da2f5B61Efb0d/roles/BALANCER-MANAGER-V1/diff/iTJ1ur6sArvnFgJ87Auppx8FrtbLMt68HnRmpVc?annotations=false#right-0x889edc2edab5f40e902b864ad4d7ade8e412f9b1)): Enhanced to include new withdrawal methods using permits for both wstETH and stETH; methods include \"requestWithdrawalsWstETHWithPermit\" and \"requestWithdrawalsWithPermit\".\n    * **Uniswap v3 WBTC / ETH LP (NFT Id 430246)** actions updated ([diff](https://roles.gnosisguild.org/eth:0xBd1099dFD3c11b65FB4BB19A350da2f5B61Efb0d/roles/BALANCER-MANAGER-V1/diff/iTJ1ur6sArvnFgJ87Auppx8FrtbLMt68HnRmpVc?annotations=false#left-0xc36442b4a4522e871399cd717abdd847ab11fe88)):\n        * Increase Liquidity\n        * Refund ETH when Increasing Liquidity.\n\n\n# Audit Considerations \n\nWe highly value the community’s involvement in reviewing and providing feedback on this proposal. We encourage members with the necessary technical expertise to examine the content carefully (including this [payload](https://gist.github.com/JeronimoHoulin/848a514985f0f3a1003b4ecfe403cffa)) and share their insights with us.\n\nFor effective testing of the permissions policy configuration, we have utilized a [Testing Avatar Safe](https://app.safe.global/balances?safe=eth:0xC01318baB7ee1f5ba734172bF7718b5DC6Ec90E1). This safe mirrors the current state of the [permissions policy v3](https://docs.google.com/document/d/1QQjkn6DAqXhdqYag0KSIfqJvdkLilOb6dM4KqaiybXc/) granted by the DAO treasury (or Avatar SAFE) to the Manager SAFE operated by karpatkey. The enhancements in the Zodiac Roles app interface now allow for a clear visualization of all existing permissions, accessible [here](https://roles.gnosisguild.org/eth:0xbd1099dfd3c11b65fb4bb19a350da2f5b61efb0d/roles/BALANCER-MANAGER-V1).\n\nThe updated interface also simplifies the process of identifying [changes](https://roles.gnosisguild.org/eth:0xBd1099dFD3c11b65FB4BB19A350da2f5B61Efb0d/roles/BALANCER-MANAGER-V1/diff/iTJ1ur6sArvnFgJ87Auppx8FrtbLMt68HnRmpVc?annotations=false) by displaying the current permissions policy on the left side and the newly proposed policy on the right side. To further aid in the adoption and understanding of these tools for audit purposes, we have detailed the proposed changes in [version 4 documentation](https://docs.google.com/document/d/1tEeXMJXsz48MKxiST1rmAHT7Pwr0H1fhnoPBo4y24A4/), following our standard Policy Update Request (PUR) format.\n\n\n# Additional considerations\n\n\n## Roles Modifier v1 and Enabling of v2\n\nThe existing Roles Modifier v1 module will remain active to ensure a smooth transition and prevent any unexpected disruptions in operational execution. Ownership of the deployed [Roles Modifier v2 module](https://etherscan.io/address/0x13c61a25DB73e7a94a244bD2205aDba8b4a60F4a), equipped with the new proposed permissions policy, has been [transferred ](https://etherscan.io/tx/0xfca048b5f788c502c8e1aba7a386d4a228622abd582b77497ec6d71d4a549891)to the treasury’s Avatar Safe. The payload will only activate this module, marking the first phase of the migration process. A subsequent policy update proposal will seek to disable the v1 module.\n\n\n## Policy Visualization in Terms of DeFi Kit Actions\n\nThe “show annotations” button, located at the top-right [here](https://roles.gnosisguild.org/eth:0xBd1099dFD3c11b65FB4BB19A350da2f5B61Efb0d/roles/BALANCER-MANAGER-V1/diff/iTJ1ur6sArvnFgJ87Auppx8FrtbLMt68HnRmpVc?annotations=false), provides a visualization of the proposed permissions policy expressed through the DeFi Kit Protocol Actions. This feature offers a more abstract and simplified description of the policy, enhancing understanding and accessibility.",
        "end_utc": "2024-08-12T18:00:00Z",
        "similarity_score": 0.1407,
        "vote_result": {
          "choices": [
            "Yes, let's do it",
            "No, this is not the way",
            "Abstain"
          ],
          "scores": [
            1739992.87346482,
            0,
            804895.2397773017
          ],
          "scores_total": 2544888.113242122,
          "state": "closed"
        },
        "tvl_impact": {
          "protocol_slug": "balancer-v1+balancer-v2+balancer-v3",
          "protocol_slugs": [
            "balancer-v1",
            "balancer-v2",
            "balancer-v3"
          ],
          "status": "success",
          "aggregation": "sum",
          "event_time_utc": "2024-08-12T18:00:00",
          "pre_tvl_avg": 684397144.5,
          "post_tvl_avg": 707123854.0,
          "abnormal_change": 3.3207,
          "pre_days": 3,
          "post_days": 3,
          "abnormal_change_raw": 0.033207,
          "abnormal_change_pct": 3.3207
        },
        "price_impact": {
          "token_id": "5728",
          "ticker": "BAL",
          "status": "success",
          "event_time_utc": "2024-08-12T18:00:00",
          "pre_price_avg": 1.9008912900000001,
          "post_price_avg": 1.902855425,
          "abnormal_change": 0.1033,
          "pre_days": 3,
          "post_days": 3,
          "abnormal_change_raw": 0.001033,
          "abnormal_change_pct": 0.1033
        }
      }
    },
    {
      "proposal_id": "0xeb91b3428ad81bdcb840d83dc8977ae4ff5432d10ae338a8b890e7966248b7b2",
      "cleaned": {
        "proposal_id": "0xeb91b3428ad81bdcb840d83dc8977ae4ff5432d10ae338a8b890e7966248b7b2",
        "title": "[BIP-162] Karpatkey Investment Strategy",
        "author": "0x7019Be4E4eB74cA5F61224FeAf687d2b43998516",
        "end_utc": "2023-01-30T19:00:00Z",
        "similarity_score": 0.135,
        "winning_option": "Yes, let's do it",
        "winning_option_index": 0,
        "margin_abs": 3794171.063709581,
        "margin_pct": 0.9998289630922885,
        "scores_total": 3794820.118007886,
        "change_stance": "To change"
      },
      "timeline_metrics": {
        "unique_voters": 314,
        "total_votes": 314,
        "first_vote_at": "2023-01-26T19:07:27Z",
        "last_vote_at": "2023-01-30T17:46:18Z",
        "series_step_hours": 6.0,
        "summary": "timeline-only analysis (no final tally)",
        "recommended_index": 0,
        "lead_ratio_by_quartile": [
          [
            1.0,
            0.0
          ],
          [
            1.0,
            0.0
          ],
          [
            1.0,
            0.0
          ],
          [
            1.0,
            0.0
          ]
        ],
        "lead_ratio_total": [
          1.0,
          0.0
        ],
        "stability": [
          1.0,
          0.0
        ],
        "early_ratio": [
          1.0,
          0.0
        ],
        "vp_by_quartile": [
          [
            722588.1968450118,
            0.0
          ],
          [
            683.1421760179758,
            323.8624325516231
          ],
          [
            334733.0744900314,
            0.6647166013502619
          ],
          [
            2736491.1773476726,
            0.0
          ]
        ],
        "spike_index": 0.699289,
        "spike_follow_support_ratio": 1.0,
        "stairwise_ratio": 1.9e-05,
        "half_slope_diff": -26.079006
      },
      "raw": {
        "id": "0xeb91b3428ad81bdcb840d83dc8977ae4ff5432d10ae338a8b890e7966248b7b2",
        "title": "[BIP-162] Karpatkey Investment Strategy",
        "author": "0x7019Be4E4eB74cA5F61224FeAf687d2b43998516",
        "body": "In order to initiate operations as per [BIP-103](https://forum.balancer.fi/t/bip-103-karpatkey-balancer-treasury-cu-proposal-update/3895), Karpatkey respectfully requests the Balancer DAO to take the following actions:\n\n1. Dismantle specific positions on the current multisigs on Mainnet, Polygon, and Arbitrum (as outlined in the Execution Details section);\n2. Bridge specific in-scope assets from Polygon and Arbitrum back to Mainnet (as outlined in the Execution Details section);\n3. Transfer all in-scope assets (totaling approximately $5,900,000 as of the day of this writing) to a new SAFE provided by Karpatkey and owned by the Balancer DAO (as outlined in the Next Steps and Execution Details sections).\n\n## Motivation\n\nAfter internal discussion, the Karpatkey team has determined that the Balancer DAO would be best served by a simpler and more direct approach. Since Karpatkey has already been voted in as the treasury manager, there is no longer a need for further discussion or a new vote on the specific allocation of funds, despite having recently proposed the \"Base vs Expanded allocation\" approach.\n\nTo streamline deployment, Karpatkey proposes beginning with the base allocation and then expanding as needed. This approach takes advantage of the Zodiac Roles Modifier permissions preset that has already been created and tested for allowlisting specific functions and protocols related to the base allocation. Karpatkey intends to move forward with this approach and will propose future adjustments in accordance with the guidelines set forth in the original proposal. However, any future adjustments to the strategy, and thus the preset, will ultimately require the approval of the Balancer DAO through the execution of a batch of transactions to apply the adjusted preset.\n\n### Zodiac Roles Modifier preset to be applied\n\nThe original post proposed the following:\n\n[quote=\"karpatkey, post:1, topic:4220\"]\n## Base allocation\n\nIf this proposal was selected, specific functions within the protocols below would be whitelisted. More technical details regarding the whitelisting process will be provided shortly.\n\n* Staking:\n  * Lido\n  * Stakewise\n* Lending:\n  * Compound v2\n  * Aave v2\n* AMM:\n  * Uniswap v3\n[/quote]\n\nTo increase flexibility and adapt to changing market conditions, Karpatkey suggests expanding protocols and functions to include ETH wrappers and unwrappers, swaps on Balancer and Uniswap v3. These swaps, except for regularly swapped reward tokens, are intended to provide Karpatkey with the ability to take immediate action in specific market conditions, such as a stablecoin losing its peg. The pools were chosen based on liquidity to maximize results for the Balancer DAO, but new permissions may be necessary as market conditions change.\n\nThe Manager preset consists of the complete list of permissions that Karpatkey asks the Balancer DAO to grant. This list can be found in this [Annex Document](https://docs.google.com/document/d/1_gtLsmCexiY0XWFwWdgpEaq2wgNDW7Z0ZvsX7p5-C2E/edit?usp=sharing). Through the Zodiac Role Modifier, the Manager preset will be applied to the Manager Role, which in turn will be assigned to Karpatkey’s Manager SAFE.\n\n### Future permissions and roles\n\nOnce the initial strategy is deployed, there will be a periodic need to adapt the portfolio to changing market conditions. If a particular strategy no longer provides sufficient yield, or if a particular pool in which the Balancer DAO has a position becomes deprecated and needs to be migrated, new permissions will be required.\n\nIn addition, creating new roles to improve or expand operations will also be necessary. Two new roles are planned for the near future: the *Harvester Role* and the *Swapper Role*. Both roles will be granted specific subsets of the Manager preset permissions and will be assigned to EOAs to automate certain tasks. The Harvester Role will be allowed to claim rewards, while the Swapper Role will be allowed to swap these rewards for ETH or stablecoins.\n\nWhen deemed appropriate, Karpatkey will create a new forum post requesting the Balancer DAO to update the preset or deploy new roles. The post will include an explanation of why the permissions and/or roles are needed and the executable payload. The proposal will need to be passed by the community and, once approved, it will be executed by the multisig according to the DAO standard operating practices. It is important that this process is as simple and straightforward as possible, since every day of waiting may represent an opportunity cost to the DAO's treasury. A summary of the new permissions and/or roles will be included as a separate section in every corresponding weekly report.\n\n### Next steps\n\nThe next steps for implementing this proposal are as follows:\n\n1. Karpatkey will create a new SAFE, deploy the Roles Modifier contract, and apply the Manager Role preset (as outlined in the Annex Document) to simplify the process for the Balancer DAO.\n2. Karpatkey will conduct a small-scale replication of the strategy for a second round of testing.\n3. Once the SAFE is created, tested, and permissions are applied, Karpatkey will transfer ownership of it to the Balancer DAO and remove themselves as owner.\n4. This proposal will be submitted to Snapshot for approval.\n5. If the proposal is approved, the Balancer DAO will execute the steps described in the Execution Details section.\n\n### Execution details\n\nThe following list is intended to serve as a clear execution roadmap for the Balancer DAO once (if) this proposal is approved:\n\n1. Dismantle the Balancer Boosted AAVE USD position on Mainnet and withdraw 100% of the funds in DAI.\n2. Dismantle WBTC + ETH position on Mainnet and withdraw the two assets in equal proportion.\n3. Dismantle ETH + GTC position on Mainnet and withdraw the two assets in equal proportion.\n4. Dismantle MATIC + USDC + WETH + BAL position on Polygon and withdraw the four assets in equal proportion.\n5. Bridge USDC and WETH from Polygon back to Mainnet.\n6. Dismantle WBTC + WETH + USDC position on Arbitrum and withdraw the three assets in equal proportion.\n7. Bridge WBTC, WETH + USDC from Arbitrum back to Mainnet.\n8. Transfer in-scope assets to the new SAFE. The approximate balances (as of the day of this writing) of in-scope assets that will be transferred are:\n\n|Token|Price|Approx Balance|Total Value|Share %|\n| --- | --- | --- | --- | --- |\n|USDC|$1.00|2,514,827|$2,514,827|42.61%|\n|AAVE|$79.50|16,907|$1,344,129|22.77%|\n|stETH|$1,542.51|312.86|$482,590|8.18%|\n|WETH|$1,552.80|266.81|$414,301|7.02%|\n|wstETH|$1,707.08|155.02|$264,632|4.48%|\n|DAI|$1.00|239,996|$239,996|4.07%|\n|WBTC|$21,007.20|11.06|$232,289|3.94%|\n|USDT|$1.00|218,949|$218,949|3.71%|\n|ETH|$1,553.00|122.82|$190,733|3.23%|\n|Grand Total|||$5,902,446|100.00%|\n\n### Specification\n\nKarpatkey has prepared the Gnosis safe on Ethereum at `0x0EFcCBb9E2C09Ea29551879bd9Da32362b32fc89`. It currently has the same signers as the DAO Multisig at `0x10A19e7eE7d7F8a52822f6817de8ea18204F2e4f`, aside from an extra 12th signer with address `0x7f87c1C42BeF332245F8B3cCAdD8224541CDaEcE`.\n\nThe DAO Multisig signers will reject tx #38 which is failing on simulation and initiate a new tx to remove this 12th signer.\n\nThe DAO Treasury on Polygon at `matic:0xeE071f4B516F69a1603dA393CdE8e76C40E5Be85` will initiate a transfer of \"B-Polybase BPT\" (contract `0x0297e37f1873D2DAb4487Aa67cD56B58E2F27875`) in the amount of `26536547394777662718278` to the LM Multisig at `matic:0xc38c5f97B34E175FFd35407fc91a937300E33860`. From there, BPT will be withdrawn and all funds bridged back to Ethereum. USDC & WETH will be sent to the Karpatkey Safe `0x0EFcCBb9E2C09Ea29551879bd9Da32362b32fc89`, BAL & WMATIC sent to the Treasury `0x10A19e7eE7d7F8a52822f6817de8ea18204F2e4f`\n\nThe DAO Treasury on Arbitrum at `arb1:0xaF23DC5983230E9eEAf93280e312e57539D098D0` will initiate a transfer of \"B-33WETH-33WBTC-33USDC\" (contract `0x64541216bAFFFEec8ea535BB71Fbc927831d0595`) in the amount of `532147981134526165239` to the LM Multisig at `arb1:0xc38c5f97B34E175FFd35407fc91a937300E33860`. From there, BPT will be withdrawn and funds bridged back to Ethereum. All funds will be sent to the Karpatkey safe `0x0EFcCBb9E2C09Ea29551879bd9Da32362b32fc89`\n\nThe DAO Treasury on Ethereum `eth:0x10A19e7eE7d7F8a52822f6817de8ea18204F2e4f` will send the following assets to the LM Multisig `eth:0xc38c5f97B34E175FFd35407fc91a937300E33860`, which will withdraw the BPTs and send the assets to the Karpatkey Safe `0x0EFcCBb9E2C09Ea29551879bd9Da32362b32fc89`, except where indicated otherwise:\n\nAave v2 boosted pool (contract: `0x7B50775383d3D6f0215A8F290f2C9e2eEBBEceb2`) amount: `682682196629189057534951`\nWBTC/WETH BPT (contract `0xA6F548DF93de924d73be7D25dC02554c6bD66dB5`) amount: `58598401025232390138`\nWETH/GTC BPT (contract `0xfF083f57A556bfB3BBe46Ea1B4Fa154b2b1FBe88`) amount: `7725430893893258147597` Note: GTC will be returned to the DAO Treasury. \n\nThe DAO Treasury on Ethereum `eth:0x10A19e7eE7d7F8a52822f6817de8ea18204F2e4f` will send the following assets to the Karpatkey Safe `0x0EFcCBb9E2C09Ea29551879bd9Da32362b32fc89`:\n\nUSDC (contract `0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48`) amount: `2139935999712`\nAave (contract `0x7Fc66500c84A76Ad7e9c93437bFc5Ac33E2DDaE9`) amount: `16907280000000000000000`\nstETH (contract `0xae7ab96520DE3A18E5e111B5EaAb095312D7fE84`) amount: `312988890260928536597`\nwstETH (contract `0x7f39C581F595B53c5cb19bD0b3f8dA6c935E2Ca0`) amount: `140236048902346440000`\nweth (contract `0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2`) amount: `61323265453850206284`",
        "end_utc": "2023-01-30T19:00:00Z",
        "similarity_score": 0.135,
        "vote_result": {
          "choices": [
            "Yes, let's do it",
            "No, this is not the way"
          ],
          "scores": [
            3794495.5908587337,
            324.5271491529734
          ],
          "scores_total": 3794820.118007886,
          "state": "closed"
        },
        "tvl_impact": {
          "protocol_slug": "balancer-v1+balancer-v2+balancer-v3",
          "protocol_slugs": [
            "balancer-v1",
            "balancer-v2",
            "balancer-v3"
          ],
          "status": "success",
          "aggregation": "sum",
          "event_time_utc": "2023-01-30T19:00:00",
          "pre_tvl_avg": 1084781371.5,
          "post_tvl_avg": 1140966475.5,
          "abnormal_change": 5.1794,
          "pre_days": 3,
          "post_days": 3,
          "abnormal_change_raw": 0.051794,
          "abnormal_change_pct": 5.1794
        },
        "price_impact": {
          "token_id": "5728",
          "ticker": "BAL",
          "status": "success",
          "event_time_utc": "2023-01-30T19:00:00",
          "pre_price_avg": 6.98164757,
          "post_price_avg": 6.996471095,
          "abnormal_change": 0.2123,
          "pre_days": 3,
          "post_days": 3,
          "abnormal_change_raw": 0.002123,
          "abnormal_change_pct": 0.2123
        }
      }
    },
    {
      "proposal_id": "0x46b48f89247d28fc26a3851269ca30424b7cfb1dede75b99b77e6a27b998dd19",
      "cleaned": {
        "proposal_id": "0x46b48f89247d28fc26a3851269ca30424b7cfb1dede75b99b77e6a27b998dd19",
        "title": "[BIP-140] Introduce TimelockAuthorizer",
        "author": "0x7019Be4E4eB74cA5F61224FeAf687d2b43998516",
        "end_utc": "2022-12-26T19:00:00Z",
        "similarity_score": 0.1241,
        "winning_option": "Yes, let's do it",
        "winning_option_index": 0,
        "margin_abs": 4902306.5181895485,
        "margin_pct": 0.9999994237053869,
        "scores_total": 4902309.343364015,
        "change_stance": "To change"
      },
      "timeline_metrics": {
        "unique_voters": 256,
        "total_votes": 256,
        "first_vote_at": "2022-12-22T19:32:57Z",
        "last_vote_at": "2022-12-26T14:48:03Z",
        "series_step_hours": 6.0,
        "summary": "timeline-only analysis (no final tally)",
        "recommended_index": 0,
        "lead_ratio_by_quartile": [
          [
            1.0,
            0.0
          ],
          [
            1.0,
            0.0
          ],
          [
            1.0,
            0.0
          ],
          [
            1.0,
            0.0
          ]
        ],
        "lead_ratio_total": [
          1.0,
          0.0
        ],
        "stability": [
          1.0,
          0.0
        ],
        "early_ratio": [
          1.0,
          0.0
        ],
        "vp_by_quartile": [
          [
            633230.3268563346,
            1.2790044776530447
          ],
          [
            1184995.1699466393,
            0.0
          ],
          [
            265145.2180131165,
            0.0
          ],
          [
            2818937.2159606935,
            0.13358275619786059
          ]
        ],
        "spike_index": 0.544127,
        "spike_follow_support_ratio": 0.999984,
        "stairwise_ratio": 2.3e-05,
        "half_slope_diff": 7.397951
      },
      "raw": {
        "id": "0x46b48f89247d28fc26a3851269ca30424b7cfb1dede75b99b77e6a27b998dd19",
        "title": "[BIP-140] Introduce TimelockAuthorizer",
        "author": "0x7019Be4E4eB74cA5F61224FeAf687d2b43998516",
        "body": "# **Introduction**\n\nBalancer's access control system is based on permissions, which can be granted and revoked. These are controlled by the `Authorizer` contract, which was deployed along with the `Vault` in April 2021.\n\nThis proposal aims to replace it with the `TimelockAuthorizer`, which provides more fine-grained control over permissions, as well as new security features. It additionally addresses a bug in the `AuthorizerAdaptor` contract that was disclosed via the Immunefi bug bounty program.\n\nFor simplicity, this migration will initially only take place on the main Ethereum network and none of the L2s or sidechains.\n\n# **Specification**\n\nThe `TimelockAuthorizer` contract (developed by Balancer Labs) is a drop-in replacement of the current `Authorizer` contract, enabling new use cases and providing security improvements.\n\nI encourage everyone to read more about each of these improvements, as they will ****greatly impact the operation of the Balancer DAO**** if this proposal where to pass (particularly the 'Delays' section).\n\n## **Granular Permissions**\n\nAs of today, permissions are global: an account with a permission can use it on any contract in the entire network. For singleton contracts (like the `Vault` or the `ProtocolFeeWithdrawer`) this is not an issue since there is only one of them. However, for contracts with multiple instances (like liquidity pools) this means that an account with e.g. permission to set swap fees can use that permission on *_any_* pool of the same type (i.e. that is created in the same factory).\n\n`TimelockAuthorizer` allows granting permissions over a single contract, meaning it will e.g. be possible to allow an account to manage a single pool's swap fees while not being able to do the same on any other pool. This has always been supported on the original `IAuthorizer` interface - the current `Authorizer` simply did not implement this capability (for simplicity).\n\nIt will still be possible to grant global permissions by passing the special sentinel address known as `EVERYWHERE` (equal to `0xFFfFfFffFFfffFFfFFfFFFFFffFFFffffFfFFFfF`).\n\n## **Granters and Revokers**\n\nThe current `Authorizer` features a single all-powerful role (`0x00..00`), currently held by the Balancer DAO Governance Multisig (`0x10A19e7eE7d7F8a52822f6817de8ea18204F2e4f`). Accounts with this role can grant and revoke any permission - but they are the only one that can do so.\n\n`TimelockAuthorizer` instead distinguishes between having a permission and being a *_granter_* or a *_revoker_* for a permission. This will increase the capacity of the the DAO Governance Multisig to delegate subtasks to other accounts. For example, instead of simply granting permission to trigger the Liquidity Mining BAL bridging process to the Balancer Labs Operations Multisig, it could make said multisig a *_granter_*, increasing flexibility (e.g. letting Balancer Labs develop contracts that trigger this process automatically and grant them permission to operate without having to involve the Governance Multisig).\n\nThe `TimelockAuthorizer` also has a *_root_* account, initially set to the Balancer DAO Governance Multisig, which always has permission to grant and revoke all permissions, and to create and destroy granters and revokers. These permissions cannot be revoked by anyone (except by transferring *_root_* to a different account), meaning it always retains full control over the system and can safely evict any rogue granters or revokers.\n\n## **Delays**\n\nArguably the most important feature of the `TimelockAuthorizer` is the capacity to assign *_minimum delays_* to certain actions. If an action has a delay, then accounts with that permission cannot immediately execute said action: they can only *_schedule_* an execution at some time in the future (greater than the action's delay).\n\nCritically, these scheduled executions can be cancelled, which lets the community detect and stop malicious or erroneous actions after they are committed on-chain but ****before they are actually executed****, greatly decreasing the risk of user error, phishing attacks, etc. This also provides users who are not happy with a future action (e.g. increased fees) with the opportunity to exit the system before those measures take place.\n\nIt is also possible to assign ****delays to the granting and revoking**** of permissions. By e.g. delaying granting and revoking the permission to mint BAL (currently only held by the automated Liquidity Mining system), we end up with a much stronger committment to said system, and greatly reduce the risk of e.g. a malicious actor somehow acquiring minting capabilities. Similar measures can be applied to other powerful permissions, such as relayer privilege, adding gauge factories to the `GaugeAdder`, etc.\n\nIn general, if a multisig wields a permission (e.g. adding gauges) then its *_execution_* should have a delay (to review the multisig's action). Instead, if a contract wields a permission (e.g. the `GaugeAdder`) then its *_granting_* should be delayed (to review the code of the contract that will use it).\n\nFor more information on how delays relate to security, see [my talk at the DeFi Security Summit](https://www.youtube.com/watch?v=LRTTplIdxfI).\n\n## **Authorizer Adaptor Entrypoint**\n\n[ChainSecurity](https://chainsecurity.com/) submitted a vulnerability disclosure via the [Immunefi bug bounty program](https://immunefi.com/bounty/balancer/) that relates to the operation of the `AuthorizerAdaptor`. Said issue was promptly mitigated and resolved, but operation of some components of the system (particularly adding reward tokens and killing gauges) has been degraded as a result. The `TimelockAuthorizer` includes a fix for this in the form of the `AuthorizerAdaptorEntrypoint`, which provides a secure way to restore regular operation.\n\n# **Migration Procedure**\n\nTo ease the transition to this new system, Balancer Labs has also developed the `TimelockAuthorizerMigrator` contract, which prepares the `TimelockAuthorizer` by granting some of the permissions that exist in the current `Authorizer`, as well as setting up some initial delays.\n\nIn order to complete the migration, the migrator needs permission to call `setAuthorizer` in the `Vault`, which can only be granted by the Balancer DAO Governance Multisig. Additionally, the Multisig must also claim the *_root_* role in the `TimelockAuthorizer`, completing the *_root_* transfer from the migrator to the Multisig. This ****cannot be done before January 5th, 2023****, since the root transfer has a minimum delay of 30 days.\n\n## Execution Details\n\nFrom the Balancer DAO Governance Multisig (`0x10A19e7eE7d7F8a52822f6817de8ea18204F2e4f`):\n\n- Call `grantRole` on the `Authorizer` (`0xA331D84eC860Bf466b4CdCcFb4aC09a1B43F3aE6`) with:\n\n* `role`: `0x1cbb503dcc0f4acaedf71a098211ff8b15a220fc26a6974a8d9deaab040fa6e0`\n\n* `account`: `0xf8ee6f1F9B54F9b2C192D703ea2d22112cBC062b`\n\n- Call `claimRoot` on the `TimelockAuthorizer` (`0x9E3cD0606Db55ac68845bB60121847823712ae05`)\n\nThe `role` argument corresponds to [the permission to call `setAuthorizer` on the `Vault`](https://github.com/balancer-labs/balancer-v2-monorepo/blob/master/pkg/deployments/action-ids/mainnet/action-ids.json#L30), and `account` is the [`TimelockAuthorizerMigrator`](https://github.com/balancer-labs/balancer-v2-monorepo/blob/master/pkg/deployments/tasks/20221202-timelock-authorizer/output/mainnet.json#L2).\n\nThe `TimelockAuthorizer` address can also be found [in its deployment](https://github.com/balancer-labs/balancer-v2-monorepo/blob/master/pkg/deployments/tasks/20221202-timelock-authorizer/output/mainnet.json#L4).\n\n**Recall that `claimRoot` cannot be called until January 5th, 2023.**\n\nOnce these two steps are done, any account in the network can call `finalizeMigration` on the `TimelockAuthorizerMigrator` (`0xf8ee6f1F9B54F9b2C192D703ea2d22112cBC062b`) to complete the process.\n\n# **Initial Configuration**\n\n **No new permissions will be granted**. The Migrator contract ensures that all permissions granted during the migration exist in the current `Authorizer`. Some of the current permissions have been left out however, since they no longer apply (e.g. permission to pause the `Vault`, which can no longer be paused as of July 2021).\n\nAny permissions granted after the deployment of the `TimelockAuthorizer` (Nov 30th) **are not automatically migrated**, and will have to be re-granted after the migration.\n\n## **Initial Delays**\n\nThe following actions have initial delays associated to them. As a rule of thumb, I propose that we assign delays to actions with high impact and that do not require urgent execution.\n\n### **Execution**\n\n- `Vault.setAuthorizer`, 30 days. All delays must be shorter or equal to this one, as they could be otherwise bypassed by simply changing the Authorizer and removing delays entirely.\n- `SmartWalletChecker.allowlistAddress`, 7 days. Once veBAL is locked this cannot be undone in any way, so extra care should be taken when adding contracts to the allowlist.\n- `VotingEscrowDelegationProxy.setDelegation`, 14 days. veBAL boost upgrades are infrequent and should be handled with care, since they can greatly affect the veBAL operation.\n- `GaugeAdder.addGaugeFactory`, 14 days. Adding new gauge factories is a critical action as it grants them permission to mint BAL. See [my talk at ETHLatam (in Spanish)](https://www.youtube.com/watch?v=1Y5IDfJQGVk) for more details.\n\n### **Granting**\n\n- `BalancerTokenAdmin.mint`, 30 days. This prevents other accounts from being able to mint BAL.\n- `ProtocolFeesCollector.withdrawCollectedFees`, 30 days. This prevents bypassing the `ProtocolFeesWithdrawer`.\n- `GaugeController.addGauge`, 14 days. This prevents bypassing the `GaugeAadder`.\n- `BALTokenHolder.withdrawFunds`, 7 days. This manages the BAL minted for the veBAL gauge.\n- Vault relayer permissions, 7 days. Relayers are quite powerful, so creating them should be carefully reviewed.\n\nThe creation of the full list of permissions and their delays can be inspected in [this script](https://github.com/balancer-labs/balancer-v2-monorepo/blob/master/pkg/deployments/tasks/20221202-timelock-authorizer/input/mainnet.ts).\n\n# **Risk**\n\nThe `TimelockAuthorizer` is a relatively complex contract, which will be used to manage all permissions on the Balancer ecosystem, including the Liquidity Mining program and management of Protocol Fees. As such, care should be taken to review it.\n\nThe Balancer Labs team has been working on this contract for around 8 months, and we are confident in its correctness. It has been [audited by ABDK](https://github.com/balancer-labs/balancer-v2-monorepo/blob/master/audits/abdk/2022-04-15.pdf), and we're currently working with Certora to conduct a second review.",
        "end_utc": "2022-12-26T19:00:00Z",
        "similarity_score": 0.1241,
        "vote_result": {
          "choices": [
            "Yes, let's do it",
            "No, this is not the way"
          ],
          "scores": [
            4902307.930776782,
            1.4125872338509051
          ],
          "scores_total": 4902309.343364015,
          "state": "closed"
        },
        "tvl_impact": {
          "protocol_slug": "balancer-v1+balancer-v2+balancer-v3",
          "protocol_slugs": [
            "balancer-v1",
            "balancer-v2",
            "balancer-v3"
          ],
          "status": "success",
          "aggregation": "sum",
          "event_time_utc": "2022-12-26T19:00:00",
          "pre_tvl_avg": 905441810.5,
          "post_tvl_avg": 890603327.0,
          "abnormal_change": -1.6388,
          "pre_days": 3,
          "post_days": 3,
          "abnormal_change_raw": -0.016388,
          "abnormal_change_pct": -1.6388
        },
        "price_impact": {
          "token_id": "5728",
          "ticker": "BAL",
          "status": "success",
          "event_time_utc": "2022-12-26T19:00:00",
          "pre_price_avg": 5.4939719149999995,
          "post_price_avg": 5.274847995,
          "abnormal_change": -3.9884,
          "pre_days": 3,
          "post_days": 3,
          "abnormal_change_raw": -0.039884,
          "abnormal_change_pct": -3.9884
        }
      }
    },
    {
      "proposal_id": "0x26a69983600e49d42fb2f6d7eebdc01f51504de574bd81273b91b225424c0f6b",
      "cleaned": {
        "proposal_id": "0x26a69983600e49d42fb2f6d7eebdc01f51504de574bd81273b91b225424c0f6b",
        "title": "[BIP-273] Permissions Preset Update Request #1",
        "author": "0x9f74662aD05840Ba35d111930501c617920dD68e",
        "end_utc": "2023-05-01T18:00:00Z",
        "similarity_score": 0.1214,
        "winning_option": "Yes, let's do it",
        "winning_option_index": 0,
        "margin_abs": 3922483.5778486603,
        "margin_pct": 0.999999433193929,
        "scores_total": 3922485.8011374255,
        "change_stance": "To change"
      },
      "timeline_metrics": {
        "unique_voters": 155,
        "total_votes": 155,
        "first_vote_at": "2023-04-27T18:07:57Z",
        "last_vote_at": "2023-05-01T14:48:40Z",
        "series_step_hours": 6.0,
        "summary": "timeline-only analysis (no final tally)",
        "recommended_index": 0,
        "lead_ratio_by_quartile": [
          [
            1.0,
            0.0,
            0.0
          ],
          [
            1.0,
            0.0,
            0.0
          ],
          [
            1.0,
            0.0,
            0.0
          ],
          [
            1.0,
            0.0,
            0.0
          ]
        ],
        "lead_ratio_total": [
          1.0,
          0.0,
          0.0
        ],
        "stability": [
          1.0,
          0.0,
          0.0
        ],
        "early_ratio": [
          1.0,
          0.0,
          0.0
        ],
        "vp_by_quartile": [
          [
            47387.42219820982,
            0.0,
            0.0
          ],
          [
            217742.13297609135,
            0.027985831272579895,
            0.0
          ],
          [
            193419.80579566953,
            0.0,
            0.0
          ],
          [
            3463935.0501379278,
            0.8052734064354524,
            0.5567702888680601
          ]
        ],
        "spike_index": 0.758838,
        "spike_follow_support_ratio": 1.0,
        "stairwise_ratio": 1.1e-05,
        "half_slope_diff": 30.139603
      },
      "raw": {
        "id": "0x26a69983600e49d42fb2f6d7eebdc01f51504de574bd81273b91b225424c0f6b",
        "title": "[BIP-273] Permissions Preset Update Request #1",
        "author": "0x9f74662aD05840Ba35d111930501c617920dD68e",
        "body": "### PR with payload\nhttps://github.com/BalancerMaxis/multisig-ops/pull/158\n\n# Summary\n\nRequest the BalancerDAO to update the Zodiac Roles Modifier permissions granted to the Manager SAFE owned by karpatkey to allow for: \n* Improving swap efficiency using alternative routes on Uniswap.\n* Increasing liquidity on the WBTC-WETH pool on Uniswap v3 with NFT ID 430246.\n* Implementing a more detailed scoping of swaps in Balancer pools.\n\n*Note: reviewing and providing feedback on the preset update payload would be a great service to the Balancer community. We welcome anyone who is willing to take the time to verify the content and encourage community members to share their feedback with us.*\n\n\n# Motivation\n\nPer [BIP-103](https://snapshot.org/#/balancer.eth/proposal/0xddc174b931a0d2e5e32276a3d0d7110367797dd24248f078d0f7876d0987c92f), karpatkey has been tasked with deploying yield-generating strategies using a portion of the existing funds in the treasury in a risk-adjusted, trust-minimised, and non-custodial manner.\n\nA new SAFE owned by the BalancerDAO was created, a Manager preset was applied to allow a specific subset of transactions and the in-scope funds were transferred. More details can be found in [this post](https://forum.balancer.fi/t/bip-162-karpatkey-investment-strategy/4220/11?u=santinomics). Since February, karpatkey has been managing the treasury portfolio, and [weekly reports](https://forum.balancer.fi/t/karpatkey-s-weekly-report-on-balancerdao-farms/4386) are published on the forum. \n\nAs we anticipated, the permissions preset is an evolving configuration that needs to be adjusted regularly. In this first update request, we are looking to fulfill the following objectives:\n\n* To further improve the efficiency of the swaps, we request the BalancerDAO to introduce new permissions to the preset allowing swapping on Uniswap v3 using the ```exactInputSingle``` function, which is expected to provide alternative swapping routes that will yield better results.\n\n* Additionally, a new permission to increase liquidity on the existing WBTC-WETH pool on Uniswap v3 with [NFT ID 430246](https://app.uniswap.org/#/pool/430246) is necessary. This is because, when configuring the permissions for the first time, a different position on the pool was created ([NFT ID 418522](https://app.uniswap.org/#/pools/418522)). However, at the time of deploying the funds into the pool, the position was out of range. Therefore, a new position was created but the ```increaseLiquidity``` function has never been whitelisted until now.\n\n* Lastly, we request adjustments to the swap function on the Balancer Vault contract to implement a more detailed scoping of swaps, which will allow for a more robust and secure swapping process.\n\nA new version of the [_“Preset permissions - Balancer”_ document](https://docs.google.com/document/d/1XKHGuPr6omIA1e10jfZg0IMYtNu0mfnHtbInPBMEsYY/edit?usp=sharing) that lists all the permissions applied to the Manager preset (including the ones being requested now) has been created. In this v2, the requested permissions are clearly highlighted as updates.\n\n\n# Specification\n\nThis proposal is expected to be voted on Snapshot, and upon successful passing, the Safe multisig holding the in-scope assets will execute the following payload. Please note that the payload only contains the changes between the deployed version and the new one. The BalancerDAO multisig owners will receive a .json file with the payload, which can be executed through the Transaction Builder app on the SAFE environment. To keep this post concise, an explanation of the requested actions is provided in this accompanying [file](https://docs.google.com/document/d/1Efr2mM8kV13xvY2uaEv0r9Brm_-9BM2ywiV4976a8-s/edit?usp=sharing).      \n\n# Additional references\n\n<span style=\"text-decoration:underline;\">Avatar Safe address</span>: [0x0EFcCBb9E2C09Ea29551879bd9Da32362b32fc89](https://etherscan.io/address/0x0EFcCBb9E2C09Ea29551879bd9Da32362b32fc89)\n\n<span style=\"text-decoration:underline;\">Roles Modifier address</span>: [0xd8dd9164E765bEF903E429c9462E51F0Ea8514F9](https://etherscan.io/address/0xd8dd9164E765bEF903E429c9462E51F0Ea8514F9)\n\n<span style=\"text-decoration:underline;\">Manager Safe address</span>: [0x60716991aCDA9E990bFB3b1224f1f0fB81538267](https://etherscan.io/address/0x60716991aCDA9E990bFB3b1224f1f0fB81538267)\n\n<span style=\"text-decoration:underline;\">Current configuration of the Manager Preset</span>: [https://github.com/gnosis/zodiac-modifier-roles/blob/mainnet-presets-progress/packages/sdk/src/presets/mainnet/deFiManageBalancer1.ts](https://github.com/gnosis/zodiac-modifier-roles/blob/mainnet-presets-progress/packages/sdk/src/presets/mainnet/deFiManageBalancer1.ts)",
        "end_utc": "2023-05-01T18:00:00Z",
        "similarity_score": 0.1214,
        "vote_result": {
          "choices": [
            "Yes, let's do it",
            "No, this is not the way",
            "Abstain"
          ],
          "scores": [
            3922484.411107898,
            0.8332592377080323,
            0.5567702888680601
          ],
          "scores_total": 3922485.8011374255,
          "state": "closed"
        },
        "tvl_impact": {
          "protocol_slug": "balancer-v1+balancer-v2+balancer-v3",
          "protocol_slugs": [
            "balancer-v1",
            "balancer-v2",
            "balancer-v3"
          ],
          "status": "success",
          "aggregation": "sum",
          "event_time_utc": "2023-05-01T18:00:00",
          "pre_tvl_avg": 1225886703.0,
          "post_tvl_avg": 1213133930.5,
          "abnormal_change": -1.0403,
          "pre_days": 3,
          "post_days": 3,
          "abnormal_change_raw": -0.010403,
          "abnormal_change_pct": -1.0403
        },
        "price_impact": {
          "token_id": "5728",
          "ticker": "BAL",
          "status": "success",
          "event_time_utc": "2023-05-01T18:00:00",
          "pre_price_avg": 6.086912965,
          "post_price_avg": 6.09779595,
          "abnormal_change": 0.1788,
          "pre_days": 3,
          "post_days": 3,
          "abnormal_change_raw": 0.001788,
          "abnormal_change_pct": 0.1788
        }
      }
    }
  ],
  "semantic_references": [],
  "decision": {
    "snapshot_url": "https://snapshot.org/#/balancer.eth/proposal/0x4526a0204044f02a5902f0d3243d9874a7204586ede269f99df1b125f80875ce",
    "selected_choice_label": "Yes, let's do it",
    "selected_choice_index": 0,
    "confidence": 0.85,
    "summary": "Proposal to deploy the kpk Sub-Roles Modifier architecture for improved flexibility and security in role management within Balancer DAO. The proposal enables modular role execution separated from governance permissioning, reducing DAO intervention frequency.",
    "key_arguments_for": [
      "Streamlined operational control allowing agile execution roles without duplicating permissions.",
      "Clear separation of duties with tightly-scoped permissions for different agents.",
      "Simplified deployment and management with the Manager Safe handling sub-role maintenance.",
      "Positive forum sentiment supports the proposal, emphasizing transparency and technical clarity.",
      "Timeline metrics strongly favor the 'Yes, let's do it' option with stable leadership."
    ],
    "key_arguments_against": [
      "Some concerns regarding the complexity of the roles and need for further tooling to understand role key limitations.",
      "Forum comments note risks regarding permissions and recommend monitoring for potential value skimming.",
      "Negative sentiment in forum highlighting need for caution and requests for more tooling support."
    ],
    "evidence": [
      {
        "source_tool": "forums_fetch_discussion",
        "reference": "https://forum.balancer.fi/t/bip-842-deploy-kpk-sub-roles-architecture/6473",
        "quote": "Mixed forum sentiment with detailed technical discussions; early comments positive explaining architecture, later comments raise concerns about permissions and tooling."
      },
      {
        "source_tool": "timeline_analyze_timeline",
        "reference": "Snapshot voting timeline",
        "quote": "Timeline metrics show strong stable leadership for 'Yes, let's do it' choice with a lead ratio of 1.0 and high stability."
      },
      {
        "source_tool": "adjacent_analytics",
        "reference": "Similar past proposals BIP-840 and BIP-839",
        "quote": "Similar proposals enabling roles and gauges passed with strong support and positive market responses, informing current recommendation."
      }
    ],
    "available_choices": [
      "Yes, let's do it",
      "No, this is not the way",
      "Abstain"
    ],
    "event_start_utc": "2025-06-13T18:00:00Z",
    "event_end_utc": "2025-06-17T18:00:00Z",
    "event_time_utc": "2025-06-17T18:00:00Z",
    "address_of_governance_token": "0xBA100000625a3754423978a60c9317c58a424e3D",
    "token_price_impact_pct": -2.3577,
    "tvl_impact_pct": -2.4081,
    "actual_vote_result": {
      "winner_label": "Yes, let's do it",
      "winner_index": 0,
      "scores": [
        2177938.40896759,
        0.0,
        970400.5389549502
      ],
      "scores_total": 3148338.947922541,
      "margin_abs": 1207537.8700126398,
      "margin_pct": 0.383548
    },
    "simulation_reason": "Recommendation based on timeline metrics, forum sentiment, and historical proposal lessons to maximize long-term DAO benefit.",
    "references": null,
    "decision_stance": "Change",
    "ai_final_conclusion": "Option 'Yes, let's do it' selected with stance to keep 'Change'.",
    "ai_final_reason": "• Timeline analysis indicates strong and stable support for 'Yes, let's do it' throughout the voting period.\n• Forum discussion presents mixed sentiment but overall supports the proposal's transparency and operational benefits, though some caution is advised.\n• Historical similar proposals with related role and gauge updates passed with strong consensus and positive outcomes, supporting this proposal's approach.\n• Market and TVL impacts are slightly negative but do not outweigh the strategic benefits of increased flexibility and security in DAO role management.\n• The recommendation aligns with the leading vote choice and reflects aggregated forum sentiment, indicating community concurrence with the change.",
    "similar_proposals": [
      {
        "proposal_id": "0x09d30b0ad9969d5e296a3833fe92d22b1e7d8f6745fa7d9347ffc197671514f4",
        "title": "[BIP-837] Enable wUSDN/BOLD Stable pool Gauge on Balancer v3 Ethereum",
        "end_utc": "2025-06-10T18:00:00Z",
        "summary": "[BIP-837] Enable wUSDN/BOLD Stable pool Gauge on Balancer v3 Ethereum closed on 2025-06-10T18:00:00Z. Timeline analytics noted 4 unique voters, timeline-only analysis (no final tally), recommended option index 0.",
        "similarity_reason": "Related text overlap (score 0.09)",
        "market_response": "token +1.99%; TVL +7.22%",
        "change_stance": "To change"
      },
      {
        "proposal_id": "0x44aef67cc15fd6ba58b10c1b61bd027584d9a24582130413b5c0c820e43bcc55",
        "title": "[BIP-840] Fund OpCo Marketing Team (Q3–Q4 2025)",
        "end_utc": "2025-06-10T18:00:00Z",
        "summary": "[BIP-840] Fund OpCo Marketing Team (Q3–Q4 2025) closed on 2025-06-10T18:00:00Z. Timeline analytics noted 5 unique voters, timeline-only analysis (no final tally), recommended option index 0.",
        "similarity_reason": "Related text overlap (score 0.08)",
        "market_response": "token +1.99%; TVL +7.22%",
        "change_stance": "To change"
      }
    ],
    "ex_post_price_impact_pct": -2.3577,
    "ex_post_tvl_impact_pct": -2.4081,
    "ex_post_window": "3d pre / 3d post around event end",
    "ex_post_note": "Token price -2.36%; TVL -2.41%"
  },
  "agentic_ai_choice": "Yes, let's do it",
  "actual_outcome": "Yes, let's do it",
  "match_result": "same",
  "forum_sentiment_summary": {
    "Negative": 4,
    "Positive": 2,
    "Neutral": 1,
    "total_comments": 7
  }
}